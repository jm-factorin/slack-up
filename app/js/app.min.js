!function(){var e=function(){function e(){TS.client.channel_pane.rebuildStarredList(),TS.client.channel_pane.rebuildChannelList(),TS.client.channel_pane.rebuildGroupList(),TS.client.channel_pane.rebuildImList(),TS.client.channel_pane.rebuildPublicPrivateChannelsList()}var t="conf_hide_msg_ids",a={escape:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},getData:function(e){var t=window.localStorage.getItem(a.getChannelKey(e));return t?JSON.parse(t):{icon:"",alias:""}},getChannelKey:function(e){return"conf_sidebar_"+e},html:function(){return'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button><h3>Set info for channel #<span id="ch_title"></span></h3></div><div class="modal-body"><p>Change channel emoji icon. Paste your emoji name here like <code>:book:</code></p><input type="text" id="ch_icon" value="" class="with-emoji-menu" style="display:inline-block; width: 100%"/><p style="margin-top: 20px">Add channel alias. Set a custom sidebar name for this channel</p><input type="text" id="ch_alias" value="" style="display:inline-block; width: 100%"/></p></div><div class="modal-footer"><a class="btn btn_save">Save</a></div>'},show:function(t){var n=$("div#change_icon_dialog");n.length||(n=$("<div>",{id:"change_icon_dialog","class":"modal hide fade in","aria-hidden":"false"}).html(a.html()),$(document.body).append(n));var i=a.getData(TS.model.active_cid);n.find("#ch_icon").val(i.icon),n.find("#ch_alias").val($("<span>").html(i.alias).text()),n.find("span#ch_title").text(t),n.find("span.ch_preview").click(function(e){TS.emoji_menu.startEmo(e,"#ch_icon")}),n.find("a.btn_save").click(function(t){t.preventDefault(),window.localStorage.setItem(a.getChannelKey(TS.model.active_cid),JSON.stringify({icon:a.escape($("#ch_icon").val().trim()),alias:a.escape($("#ch_alias").val().trim())})),e(),n.modal("hide")}),n.modal("show")}},n=TS.templates.menu_channel_items;TS.templates.menu_channel_items=function(e){var t=$("<div>").html(n(e)),a=$("<li>",{id:"channel_info_change"}).html("<a>Set Channel Info</a>");return a.insertAfter(t.find("li.divider").first()),t.html()};var i=TS.templates.builders.buildMsgHTML;TS.templates.builders.buildMsgHTML=function(e,t){var a=i(e,t);try{var n=$("<div>").html(a),s=n.find("ts-message").first().attr("id"),l=n.find("a.message_sender").attr("href"),r=n.find("div.action_hover_container");if(l){var c=$("<a>").attr("data-action","mention").attr("data-user",l.split("/")[2]).addClass("ts_icon ts_icon_mentions").addClass("ts_tip ts_tip_top ts_tip_float ts_tip_delay_600 ts_tip_hidden").append($("<span>").addClass("ts_tip_tip").html("Mention"));r.prepend(c)}var d=$("<a>").attr("data-action","hide").attr("data-ts-message-id",s).addClass("ts_icon ts_icon_archive").addClass("ts_tip ts_tip_top ts_tip_float ts_tip_delay_600 ts_tip_hidden").append($("<span>").addClass("ts_tip_tip").html("Hide"));return d.insertAfter(r.find('a[data-action="copy_link"]')),n.html()}catch(o){return console.error(o),a}};var s=TS.templates.member;TS.templates.member=function(e){var t=s(e),a=$("<div>").html(t),n=$("<img>");n.css("display","inline-block"),n.css("margin","0 0 5px 5px"),n.css("border-radius","3px"),n.css("height","20px"),n.css("width","20px");var i=a.find("span.presence")[0],l=a.find("i.slackbot_icon")[0];if(l)n.attr("src","https://slack.global.ssl.fastly.net/66f9/img/slackbot_24.png"),n.insertAfter($(l));else{var r=TS.members.getMemberById($(i).data("member-presence"));n.attr("src",r.profile.image_24),n.insertAfter($(i))}return a.html()};var l=TS.templates.channel;TS.templates.channel=function(e){var t=l(e),n=$("<div>").html(t),i=n.find("a.channel_name").data("channel-id"),s=n.find("a.channel_name").attr("href");try{var r=a.getData(i);if(!r.icon&&!r.alias)return t;var c=n.find("span.overflow_ellipsis");c.empty();try{var d=$(TS.emoji.graphicReplace(r.icon,{force_img:!0}));d.attr("src")?d.css("margin","-2px 3px 0 "):d=$('<span class="prefix"># </span>')}catch(o){d=$('<span class="prefix"># </span>')}var p=r.alias?r.alias:s.split("/")[2];return c.prepend(d),c.append(p),n.html()}catch(o){return console.error(o),t}};var r=TS.templates.message;TS.templates.message=function(e){var a=r(e),n=$("<div>").html(a),i=n.find("ts-message").first().attr("id"),s=JSON.parse(window.localStorage.getItem(t));return s&&s.hasOwnProperty(i)&&s[i]?"":a},$(document.body).on("click",'[id="channel_info_change"]',function(e){e.preventDefault(),a.show(TS.menu.channel.name),TS.menu.end()}),$(document.body).on("click",'[data-action="mention"]',function(e){var t=$("textarea#message-input");if(!t.prop("disabled")){var a=t.val()+"@"+$(e.target).data("user");t.val(a.trim()+" ").trigger("autosize").trigger("autosize-resize").focus()}}),$(document.body).on("click",'[data-action="hide"]',function(e){var a=$(e.target).data("ts-message-id"),n=JSON.parse(window.localStorage.getItem(t));n=n?n:{},n[a]=!0,window.localStorage.setItem(t,JSON.stringify(n)),TS.client.msg_pane.rebuildMsgs()}),e()},t=document.createElement("script");t.type="text/javascript",t.innerHTML="("+e.toString()+")();",document.body.appendChild(t)}();